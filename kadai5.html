<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordMaster: PWT-R Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Amazon S3 を使ってWeb公開をしました -->
    <!-- URL: http://wordmaster-pwtr-edition.s3-website-us-east-1.amazonaws.com/ -->

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background: linear-gradient(135deg, #f5f5f5, #c3cfe2);
            margin: 0;
            padding-top: 80px;
            height: 100vh;
            overflow: hidden;
        }       
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
            transform: translateY(-3px);
        }
        button:disabled {
            background-color: #cccccc;
            color: #666666;
            cursor: not-allowed;
        }
        .hidden {
            display: none !important;
        }
        .feedback {
            margin-top: 20px;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .meaning {
            font-style: italic;
            color: #555;
        }
        .progress {
            margin-top: 20px;
        }
        .fixed-bottom {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 600px;
        }
        #container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 600px;
            overflow-y: auto;
            max-height: calc(100vh - 120px);
            margin-top: 120px;
        }
        #container.full-height {
            height: 100vh;
            max-height: 78%;
        }
        #words-list {
            text-align: left;
            margin: 0;
            padding: 0 20px;
            list-style-position: inside;
            flex-grow: 1;
            overflow-y: auto;
        }
        #words-list li {
            margin: 10px;
            line-height: 1.5;
        }
        #back-button-container {
            margin-top: 20px;
        }
        #flashcard {
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 12px;
            width: 80%;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
        #flashcard-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #flashcard-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        #flashcard-buttons button {
            padding: 10px 20px;
            min-width: 150px;
            text-align: center;
            margin-bottom: 20px;
        }
        #header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #007bff;
            color: white;
            padding: 15px 30px;
            width: 100%;
            box-sizing: border-box;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        #header button {
            font-size: 1.5em;
            font-weight: bold;
            background-color: #0056b3;
            color: white;
            padding: 10px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        #header button:hover {
            background-color: #004494;
        }
        #title {
            flex-grow: 1;
            text-align: center;
            margin: 0;
            font-size: 1.8em;
        }
        #num-questions-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
        }
        #num-questions-view h1 {
            margin-bottom: 20px;
            font-size: 2em;
        }
        #num-questions-view label {
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        #num-questions {
            padding: 10px;
            font-size: 1em;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
            width: 100px;
            text-align: center;
        }
        #num-questions-view button {
            font-size: 1.2em;
            padding: 10px 20px;
            margin: 10px;
        }
    </style>
</head>
<body>
    <div id="header">
        <button onclick="showView('home-view')">Home</button>
        <h1 id="title" >WordMaster: PWT-R Edition</h1>
    </div>
    <div id="container">
        <div id="home-view">
            <h1>Home</h1>
            <button onclick="showView('num-questions-view')" >Start Quiz</button>
            <button onclick="showView('flashcards-view')" >Flashcards</button>
            <button onclick="showView('list-view')" >Show All Words</button>
        </div>

        <div id="num-questions-view" class="hidden">
            <h1>Select Number of Questions</h1>
            <label for="num-questions" >Number of Questions:</label>
            <select id="num-questions">
                <option value="20">20</option>
                <option value="40">40</option>
                <option value="60">60</option>
                <option value="80">80</option>
                <option value="100">100</option>
            </select>
            <button onclick="startQuiz()" >Start Quiz</button>
            <button onclick="showView('home-view')" >Back to Home</button>
        </div>

        <div id="quiz-view" class="hidden">
            <h1>Quiz</h1>
            <div id="question-container">
                <h2 id="meaning"></h2>
                <div id="options-container"></div>
            </div>
            <div id="feedback" class="feedback"></div>
            <div id="next-button-container" class="feedback">
                <button id="next-button" style="display:none;" >Next</button>
            </div>
            <button onclick="showView('home-view')" >Back to Home</button>
            <div class="progress fixed-bottom">
                <p id="score" >Score: 0/0</p>
                <p id="correct-answers" >Correct Answers: 0</p>
                <p id="questions-left" >Number of questions left: 0</p>
            </div>
        </div>

        <div id="flashcards-view" class="hidden">
            <h1>Flashcards</h1>
            <div id="flashcard-container">
                <div id="flashcard">
                    <p id="flashcard-text"></p>
                </div>
                <div id="flashcard-buttons">
                    <button id="prev-flashcard-button" >Prev</button>
                    <button id="show-answer-button" >Show Answer</button>
                    <button id="next-flashcard-button" >Next</button>
                </div>
            </div>
            <button onclick="showView('home-view')" >Back to Home</button>
        </div>

        <div id="list-view" class="hidden">
            <h1>All Words List</h1>
            <ol id="words-list">
                
            </ol>
            <div id="back-button-container">
                <button onclick="showView('home-view')" >Back to Home</button>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        const questions = [
            { word: "prefix", meaning: "letters that come before a root word" },
            { word: "suffix", meaning: "letters that come after a root word" },
            {
                word: "peripheral",
                meaning: "equipment that can be connected to computers",
            },
            { word: "synonym", meaning: "a word that has the same meaning" },
            {
                word: "telework",
                meaning: "working at home, while communicating with IT",
            },
            {
                word: "mainframe",
                meaning:
                    "a powerful computer that many users can use at the same time",
            },
            { word: "simultaneous", meaning: "happening at the same time" },
            { word: "laptop", meaning: "an easy-carried computer" },
            { word: "compliancy", meaning: "meeting the requirement" },
            {
                word: "incorporate",
                meaning: "to include something as a part of something larger",
            },
            {
                word: "recognition",
                meaning: "the act of acknowledging something",
            },
            {
                word: "terminal",
                meaning:
                    "any device for accessing information from a computer system",
            },
            {
                word: "joystick",
                meaning:
                    "vertical handled input device to control a machine or play a game",
            },
            {
                word: "resolution",
                meaning: "image clarity based on the number of pixels",
            },
            {
                word: "ALU",
                meaning:
                    "main part of a CPU that calculates input and performs logic functions",
            },
            {
                word: "expansion slot",
                meaning:
                    "openings on the motherboard where additional boards can be inserted",
            },
            { word: "volatile", meaning: "temporary (related to memory)" },
            {
                word: "BIOS",
                meaning:
                    "set of computer instructions in firmware which controls input-output operations",
            },
            {
                word: "binary digit",
                meaning: "bit, notation where there are only 0 and 1",
            },
            {
                word: "synchronize",
                meaning: "to (cause to) happen at the same time",
            },
            {
                word: "capability",
                meaning: "the ability or power to do something",
            },
            {
                word: "bus",
                meaning: "a circuit that connects the CPU and other devices",
            },
            { word: "execute", meaning: "to do or perform program instructions" },
            {
                word: "RAM/ROM",
                meaning: "computer memory; the volatile and the non-volatile",
            },
            {
                word: "ergonomics",
                meaning: "the study of work environment design",
            },
            {
                word: "posture",
                meaning: "the way in which your body is positioned",
            },
            {
                word: "eye strain",
                meaning: "vision discomfort caused by fatigue",
            },
            {
                word: "addiction",
                meaning: "the state of not being able to stop doing something",
            },
            { word: "adequate", meaning: "enough; sufficient; as required" },
            {
                word: "wrist",
                meaning: "a part of the body between the hand and the arm",
            },
            { word: "toxic", meaning: "poisonous" },
            { word: "dispose", meaning: "to get rid of or throw away" },
            { word: "repetitive", meaning: "something done over and over again" },
            { word: "diagnose", meaning: "to analyze the cause of something" },
            {
                word: "cursor",
                meaning:
                    "a moveable indicator to show the position on the computer screen",
            },
            {
                word: "word wrap",
                meaning:
                    "a feature in a word processor that automatically moves words to the next line",
            },
            { word: "margin", meaning: "the border, edge of the paper" },
            { word: "merge", meaning: "to join one thing with another" },
            {
                word: "indent",
                meaning:
                    "the start position further from the margin than the main part of the text",
            },
            {
                word: "distinctive",
                meaning: "unique features of a person or thing",
            },
            { word: "thesaurus", meaning: "a book of synonyms and antonyms" },
            { word: "typeface", meaning: "the characteristic design of a font" },
            {
                word: "replace",
                meaning: "to change something with something else",
            },
            {
                word: "align",
                meaning:
                    "to put items in a word processed document into a straight line",
            },
            {
                word: "fractal",
                meaning: "a complicated geometric pattern in mathematics",
            },
            {
                word: "render",
                meaning:
                    "to use colour and shading in order to make it appear solid and 3D",
            },
            {
                word: "interactive",
                meaning: "a feature of software that allows a two-way relation",
            },
            { word: "integrate", meaning: "to bring together and make whole" },
            {
                word: "extracurricular",
                meaning: "outside the regular course of study",
            },
            {
                word: "compress",
                meaning: "to make a file smaller than its original size",
            },
            {
                word: "extension",
                meaning:
                    "the suffix after the dot of a filename to indicate file type",
            },
            {
                word: "codec",
                meaning: "a software for compressing and decompressing data files",
            },
            { word: "adversary", meaning: "an enemy; an opponent" },
            {
                word: "encyclopedia",
                meaning:
                    "a collection of detailed articles that give background on a wide range of topics",
            },
            {
                word: "plug-in",
                meaning:
                    "a software application that adds a specific feature to a browser",
            },
            {
                word: "rip",
                meaning: "to copy data from a media source onto a computer",
            },
            {
                word: "speech synthesis",
                meaning:
                    "the process of computers producing sounds that resemble spoken words",
            },
            {
                word: "manipulate",
                meaning: "to customize or edit files; to handle or use skillfully",
            },
            { word: "pupil", meaning: "a student; a learner" },
            {
                word: "clue",
                meaning: "a fact or object that helps to solve mysteries",
            },
            { word: "auxiliary", meaning: "giving assistance or support" },
            {
                word: "tutorial",
                meaning: "a computer application that teaches how to do something",
            },
            {
                word: "built-in",
                meaning: "component that is contained within a device",
            },
            { word: "decode", meaning: "to decipher; to interpret" },
            {
                word: "machine code",
                meaning: "the most basic programming language made of 0s and 1s",
            },
            {
                word: "compiler",
                meaning:
                    "a program that translates high-level language into machine language",
            },
            {
                word: "high-level/low-level language",
                meaning: "programming codes; instructions for a computer to run",
            },
            { word: "bug", meaning: "a computer programming error" },
            { word: "sophisticated", meaning: "highly complex and intricate" },
            { word: "crucial", meaning: "of high importance; critical" },
            {
                word: "conventional",
                meaning: "traditional; existing from before",
            },
            {
                word: "substitute",
                meaning: "something used to replace something else",
            },
            {
                word: "abbreviation",
                meaning: "a shortened form of a word or phrase",
            },
            {
                word: "applet",
                meaning:
                    "a graphical Java program that runs automatically in a web browser",
            },
            { word: "successive", meaning: "consecutive; happening in order" },
            {
                word: "encrypt",
                meaning:
                    "a way of making the data accessible only to those with a key",
            },
            {
                word: "defragment",
                meaning: "to organize data close together on a hard disk",
            },
            {
                word: "initialize",
                meaning: "to make a disk so that data can be recorded on it",
            },
            {
                word: "cyberslack",
                meaning:
                    "someone who uses the computer at work for personal purposes",
            },
            {
                word: "transmission",
                meaning: "to send data from one place to another",
            },
            {
                word: "optimizer",
                meaning:
                    "a program that maximizes the performance of your computer",
            },
            { word: "cyborg", meaning: "a being that is part robot" },
            { word: "consent", meaning: "permission" },
            {
                word: "malware",
                meaning: "harmful software that damages a computer",
            },
            {
                word: "trial",
                meaning:
                    "using a software before buying it to inspect its functions",
            },
            {
                word: "spyware",
                meaning:
                    "a program that secretly sends information from your computer to another",
            },
            {
                word: "infiltrate",
                meaning: "to access a computer, usually without permission",
            },
            { word: "comprise", meaning: "to include; is made of" },
            {
                word: "peer-to-peer",
                meaning:
                    "type of network where all the computers have the same capabilities",
            },
            {
                word: "classify",
                meaning: "to put items into groups or categories",
            },
            {
                word: "terrestrial",
                meaning: "of the earth; without using satellites",
            },
            {
                word: "aerial",
                meaning: "(a signal) sent through the air without going into space",
            },
            { word: "enthusiastic", meaning: "very excited about" },
            { word: "plentiful", meaning: "abundant; a sufficient amount of" },
            {
                word: "compatible",
                meaning: "works together well with other components",
            },
            { word: "reliable", meaning: "works smoothly without any trouble" },
            {
                word: "spacious",
                meaning: "having lots of room; having a large memory",
            },
            {
                word: "proprietary",
                meaning: "requiring a license for usage; not freeware",
            },
            { word: "qualify", meaning: "to modify; to describe" },
            {
                word: "warranty",
                meaning:
                    "a service policy to fix or replace broken parts for a specified time",
            },
        ];

        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let flashcardIndex = 0;
        let totalQuestions = 0;
        let quizInProgress = false;
        let showAnswer = false;
        let incorrectQuestions = new Set();
        const answeredQuestions = new Set();

        document.getElementById('show-answer-button').addEventListener('click', toggleAnswerFlashcard);
        document.getElementById('next-flashcard-button').addEventListener('click', nextFlashcard);
        document.getElementById('prev-flashcard-button').addEventListener('click', prevFlashcard);
        document.getElementById("next-button").addEventListener("click", handleNext);        

        function showView(viewId) {
            if (viewId === 'home-view' && quizInProgress && answeredQuestions.size < totalQuestions) {
                alert(`You need to finish the quiz before going back to home. Questions left: ${totalQuestions - answeredQuestions.size}`);
                return;
            }
            document.querySelectorAll('#container > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(viewId).classList.remove('hidden');

            const container = document.getElementById('container');
            if(viewId === 'list-view') {
                container.classList.add('full-height');
            } else {
                container.classList.remove('full-height');
            }

            if(viewId === 'quiz-view') {
                updateScore();
            } else if (viewId === 'list-view') {
                populateWordList();
            } else if (viewId === 'home-view') {
                resetQuiz(); // ホーム画面に戻ったらクイズをリセットする
            } else if (viewId === 'flashcards-view') {
                displayFlashcard();
            }
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function getOptions(correctWord) {
            const options = shuffle([...questions.map((q) => q.word)]).slice(0, 4);
            if (!options.includes(correctWord)) {
                options[Math.floor(Math.random() * options.length)] = correctWord;
            }
            return shuffle(options);
        }

        function startQuiz() {
            const numQuestionsSelect = document.getElementById("num-questions");
            totalQuestions = parseInt(numQuestionsSelect.value);
            shuffledQuestions = shuffle([...questions]).slice(0, totalQuestions);
            resetQuiz();
            showView('quiz-view');
            quizInProgress = true;
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            answeredQuestions.clear();
            incorrectQuestions.clear();
            displayQuestion();
            quizInProgress = false;
        }

        function displayQuestion() {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            document.getElementById("meaning").textContent = currentQuestion.meaning;
            const optionsContainer = document.getElementById("options-container");
            optionsContainer.innerHTML = "";
            const options = getOptions(currentQuestion.word);
            options.forEach((option) => {
                const button = document.createElement("button");
                button.textContent = option;
                button.addEventListener("click", () => handleAnswer(option));
                optionsContainer.appendChild(button);
            });
            document.getElementById("feedback").textContent = "";
            document.getElementById("next-button").style.display = "none";
            enableButtons();
        }

        function handleAnswer(option) {
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const feedback = document.getElementById("feedback");
            if (option === currentQuestion.word) {
                score++;
                feedback.textContent = "Correct!";
                answeredQuestions.add(currentQuestionIndex); // 正解した問題を配列から削除する
            } else {
                feedback.textContent = `Incorrect! The correct answer is "${currentQuestion.word}".`;
                incorrectQuestions.add(currentQuestionIndex); // 不正解の問題を配列に追加する
            }
            document.getElementById("next-button").style.display = "block";
            disableButtons();
            updateScore();
        }

        function handleNext() {
            if (answeredQuestions.size >= totalQuestions) {
                alert(`Quiz finished! Your score is ${score}/${totalQuestions}.`);
                resetQuiz();
                showView('home-view');
            } else {
                currentQuestionIndex++;
                if (currentQuestionIndex >= totalQuestions) {
                    currentQuestionIndex = 0;
                }
                while(answeredQuestions.has(currentQuestionIndex) && answeredQuestions.size < totalQuestions) {
                    currentQuestionIndex++;
                    if (currentQuestionIndex >= totalQuestions) {
                        currentQuestionIndex = 0;
                    }
                }
                displayQuestion();
            }
        }

        function updateScore() {
            document.getElementById("score").textContent = `Score: ${score}/${totalQuestions}`;
            document.getElementById("correct-answers").textContent = `Correct Answers: ${score}`;
            document.getElementById("questions-left").textContent = `Number of questions left: ${totalQuestions - answeredQuestions.size}`;
        }

        function disableButtons() {
            const buttons = document.querySelectorAll("#options-container button");
            buttons.forEach(button => {
                button.disabled = true;
                button.classList.add('disabled');
            });
        }

        function enableButtons() {
            const buttons = document.querySelectorAll("#options-container button");
            buttons.forEach(button => {
                button.disabled = false;
                button.classList.remove('disabled');
            });
        }

        function populateWordList() {
            const listContainer = document.getElementById("words-list");
            listContainer.innerHTML = "";
            questions.forEach(question => {
                const listItem = document.createElement("li");
                listItem.innerHTML = `<strong>${capitalizeFirstLetter(question.word)} :</strong> ${question.meaning}`;
                listContainer.appendChild(listItem);
            });
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function displayFlashcard() {
            const flashcardText = document.getElementById('flashcard-text');
            const flashcard = questions[flashcardIndex];
            if (showAnswer) {
                flashcardText.textContent = flashcard.word;
                document.getElementById('show-answer-button').textContent = 'Hide Answer';
            } else {
                flashcardText.textContent = flashcard.meaning;
                document.getElementById('show-answer-button').textContent = 'Show Answer';
            }
        }
        
        function toggleAnswerFlashcard() {
            showAnswer = !showAnswer;
            displayFlashcard();
        }
        
        function nextFlashcard() {
            flashcardIndex = (flashcardIndex + 1) % questions.length;
            showAnswer = false;
            displayFlashcard();
        }
        
        function prevFlashcard() {
            flashcardIndex = (flashcardIndex - 1 + questions.length) % questions.length;
            showAnswer = false;
            displayFlashcard();
        }
        displayFlashcard();
    </script>
</body>
</html>